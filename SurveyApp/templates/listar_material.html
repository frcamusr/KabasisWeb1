{% extends "KabasisWebApp/base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5 bg-white p-4 rounded">
    <h1 class="text-center mb-4">Contenido para el Curso {{ idCurso }} - Unidad {{ unidad }}</h1>

    <div class="row mb-4">
        <div class="col-md-6">
            <h2>Quizzes Existentes:</h2>
            {% if quizzes %}
                <ul>
                    {% for q in quizzes %}
                        <li>
                            Quiz {{ q.id }} - 
                            <a href="{% url 'editar_quiz' q.id %}">Editar Quiz</a> -
                            <a href="{% url 'eliminar_quiz' q.id %}">Eliminar Quiz</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No existen quizzes para este curso y unidad.</p>
            {% endif %}
            <a href="{% url 'crear_quiz' idCurso=idCurso unidad=unidad %}" class="btn btn-primary">Crear Nuevo Quiz</a>
        </div>

        <div class="col-md-6">
            <h2>Contenido Existentes:</h2>
            {% if texto %}
                <ul>
                    {% for txt in texto %}
                        <li>
                            Quiz {{ txt.id }} - 
                            <a href="{% url 'editar_texto' txt.id %}">Editar Contenido</a> -
                            <a href="{% url 'eliminar_texto' txt.id %}">Eliminar Contenido</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No existen Contenido para este curso y unidad.</p>
            {% endif %}
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#crear-contenido">Crear Nuevo Contenido</button>       
         </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-6">
            <h2>Video Existentes:</h2>
            {% if video %}
                <ul>
                    {% for vi in video %}
                        <li>
                            Quiz {{ vi.id }} - 
                            <a href="{% url 'editar_video' vi.id %}">Editar Video</a> -
                            <a href="{% url 'eliminar_video' vi.id %}">Eliminar Video</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No existen Videos para este curso y unidad.</p>
            {% endif %}
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#crear-video">Crear Nuevo Video</button>       
        </div>

        <div class="col-md-6">
            <h2>Actividad Existentes:</h2>
            {% if actividad %}
                <ul>
                    {% for act in actividad %}
                        <li>
                            Quiz {{ act.id }} - 
                            <a href="{% url 'listar_actividad' act.id %}">Ver Actividad</a> -
                            <a href="{% url 'eliminar_actividad' act.id %}">Eliminar Actividad</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No existen Actividad para este curso y unidad.</p>
            {% endif %}
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#crear-actividad">Crear Nueva Actividad</button>
        </div>
    </div>
</div>
<div class="modal fade" id="crear-actividad" tabindex="-1" role="dialog" aria-labelledby="crear-actividad-titulo" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="crear-actividad-titulo">Crear actividad</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form method="post" action="{% url 'crear_actividad' idCurso=idCurso unidad=unidad %}">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="titulo">Título</label>
                        <input type="text" class="form-control" id="titulo" name="titulo" placeholder="Título de la actividad">
                    </div>
                    <div class="form-group">
                        <label for="descripcion">Descripción</label>
                        <textarea class="form-control" id="descripcion" name="descripcion" placeholder="Descripción de la actividad"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="crear-contenido" tabindex="-1" role="dialog" aria-labelledby="crear-contenido-titulo" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="crear-contenido-titulo">Crear Nuevo Contenido</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h1>Crear Nuevo Contenido</h1>

                <form method="post" action="{% url 'crear_texto' idCurso unidad %}">
                    {% csrf_token %}
                    <input type="hidden" name="idCurso" value="{{ idCurso }}">
                    <input type="hidden" name="unidad" value="{{ unidad }}">
                    
                    <label for="titulo">Título:</label>
                    <input type="text" id="titulo" name="titulo" required><br>

                    <label for="contenido">Contenido:</label><br>
                    <textarea id="contenido" name="texto" rows="4" cols="50" required></textarea><br>

                    <input type="submit" value="Crear Contenido">
                </form>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="crear-video" tabindex="-1" role="dialog" aria-labelledby="crear-video-titulo" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="crear-video-titulo">Crear Nuevo Video</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h1>Crear Nuevo Video</h1>

                <form method="post" action="{% url 'crear_video' idCurso unidad %}">
                    {% csrf_token %}
            
                    <label for="titulo">Nombre del video:</label>
                    <input type="text" id="titulo" name="titulo" required><br>
                    
                    <label for="link">Enlace del Video:</label>
                    <input type="text" id="link" name="link" required><br>
            
                    <label for="descripcion">Descripción:</label><br>
                    <textarea id="descripcion" name="descripcion" rows="4" cols="50" required></textarea><br>
            
                    <input type="submit" value="Guardar Video">
                </form>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}
